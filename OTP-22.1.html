---
layout: patch
erlang_download_readme: https://erlang.org/download/otp_src_22.1.readme
html: https://github.com/erlang/otp/releases/download/OTP-22.1/otp_doc_html_22.1.tar.gz
html_url: https://github.com/erlang/otp/releases/tag/OTP-22.1
man: https://github.com/erlang/otp/releases/download/OTP-22.1/otp_doc_man_22.1.tar.gz
name: 22.1
published_at: 2019-09-17T14:17:51Z
readme: https://github.com/erlang/otp/releases/download/OTP-22.1/OTP-22.1.README
release: 22
src: https://github.com/erlang/otp/releases/download/OTP-22.1/otp_src_22.1.tar.gz
tag_name: OTP-22.1
win32: https://github.com/erlang/otp/releases/download/OTP-22.1/otp_win32_22.1.exe
win64: https://github.com/erlang/otp/releases/download/OTP-22.1/otp_win64_22.1.exe
Applications:
  HIGHLIGHTS:
    pre: ""
    post: ""
    tickets:
      OTP-13872:
        release_note: "The Message Authentication Codes (MAC) CMAC, HMAC and Poly1305 are unified into common functions in the New Crypto API. See the manual for CRYPTO.\n\n"
        Applications: "crypto"
      OTP-15431:
        release_note: "Basic support for TLS 1.3 Client for experimental use. For more information see the Standards Compliance chapter of the User's Guide.\n\n"
        Applications: "ssl"
      OTP-15738:
        release_note: "erlc can now automatically use a compile server to avoid starting an Erlang system for each file to be compiled in a multi-file project. See the documentation for how to enable it.\n\n"
        Applications: "erts"
        RelatedIds: "PR-2361"
  POTENTIALINCOMPATIBILITIES:
    pre: ""
    post: ""
    tickets:
      OTP-15510:
        release_note: "Debugging of time-outs in gen_statem has been improved. Starting a time-out is now logged in sys:log and sys:trace. Running time-outs are visible in server crash logs, and with sys:get_status. Due to this system events {start_timer, Action, State} and {insert_timout, Event, State} have been added, which may surprise tools that rely on the format of these events.\n\nNew features: The EventContent of a running time-out can be updated with {TimeoutType, update, NewEventContent}. Running time-outs can be cancelled with {TimeoutType, cancel} which is more readable than using Time = infinity.\n\n"
        Applications: "stdlib"
      OTP-15979:
        release_note: "Transactions with sticky locks could with async_asym transactions be committed in the wrong order, since asym transaction are spawned on the remote nodes.\n\nTo fix this bug the communication protocol between mnesia nodes had to be updated, thus mnesia will no longer be able to connect to nodes earlier than mnesia-4.14 , OTP-19.0.\n\n"
        Applications: "mnesia"
        RelatedIds: "ERL-768"
  OTP-22.1:
    pre: ""
    post: ""
    tickets:
      OTP-16051:
        release_note: "Update the documentation build support to handle FOP 2.1 .\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "erl_docgen, otp"
  common_test-1.18:
    pre: "The common_test-1.18 application can be applied independently of\n other applications on a full OTP 22 installation."
    post: "Full runtime dependencies of common_test-1.18: compiler-6.0,\n crypto-3.6, debugger-4.1, erts-7.0, ftp-1.0.0, inets-6.0, kernel-4.0,\n observer-2.1, runtime_tools-1.8.16, sasl-2.4.2, snmp-5.1.2, ssh-4.0,\n stdlib-3.5, syntax_tools-1.7, tools-2.8, xmerl-1.3.8"
    tickets:
      OTP-15863:
        release_note: "If a ct hook is installed in the suite/0 function in a test suite, then the hook's terminate/1 function would be called several times without it's init/2 function being called first. This is now corrected.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "common_test"
        RelatedIds: "ERIERL-370"
      OTP-15869:
        release_note: "If init_per_testcase fails, the test itself is skipped. According to the documentation, it should be possible to change the result to failed in a hook function. The only available hook function in this case is post_init_per_testcase, but changing the return value there did not affect the test case result. This is now corrected.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "common_test"
        RelatedIds: "ERIERL-350"
      OTP-15789:
        release_note: "Add ct_netconfc support for NETCONF 1.1 (RFC 6241). The 1.1 base capability can be sent in hello, and RFC 6242 chunk framing is applied when both client and server advertise 1.1 support.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "common_test"
      OTP-15934:
        release_note: "Correct lib_dir paths in common_tests opaque data structure that is passed to ct_release_test callback modules in functions upgrade_init/2, upgrade_upgraded/2 and upgrade_downgraded/2. The incorrect paths may cause confusion when debugging although it will not cause any incorrect behavior on the part of common_test as it is currently not used.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "common_test"
  compiler-7.4.5:
    pre: "The compiler-7.4.5 application can be applied independently of other\n applications on a full OTP 22 installation."
    post: "Full runtime dependencies of compiler-7.4.5: crypto-3.6, erts-9.0,\n hipe-3.12, kernel-4.0, stdlib-2.5"
    tickets:
      OTP-15833:
        release_note: "Code such as the following would crash the compiler in OTP 22: [some_atom = fun some_function/1]\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "compiler"
      OTP-15923:
        release_note: "Compilation could get really slow (in the order of minutes instead of seconds) when compiling huge functions. (Thanks to Kostis Sagonas for reporting this bug.)\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "compiler"
      OTP-15954:
        release_note: "Fixed a bug in the validator that could reject valid code.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "compiler"
        RelatedIds: "ERL-995"
      OTP-15963:
        release_note: "In rare circumstances, when two clauses had identical bodies and guard tests that tested a single boolean variable, the guard test for the second clause could be discarded, executing the second clause unconditionally if the first clause was not executed.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "compiler"
      OTP-15966:
        release_note: "Fixed extremely slow compilation for huge functions doing predominantly pattern matching.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "compiler"
        RelatedIds: "ERL-1014"
      OTP-15968:
        release_note: "The compiler could generate unsafe code (that would crash the runtime system) for map pattern matching. The code could be unsafe if the matched key was not present in the map at runtime.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "compiler"
        RelatedIds: "ERL-1017"
      OTP-15969:
        release_note: "Correct code using try/after could fail to compile when using the option 'no_type_opt'.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "compiler"
        RelatedIds: "ERL-997"
      OTP-15970:
        release_note: "The compiler could crash when compiling code that called 'length/1' on a binary extracted using the binary syntax.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "compiler"
        RelatedIds: "ERL-1013"
      OTP-15982:
        release_note: "Fixed a bug where the compiler could fail with an internal consistency failure error when compiling receive statements.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "compiler"
        RelatedIds: "ERL-1022"
      OTP-15985:
        release_note: "Fixed a problem where the compiler would crash when compiling binary matching in a function head.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "compiler"
        RelatedIds: "ERL-1026"
  crypto-4.6:
    pre: "The crypto-4.6 application can be applied independently of other\n applications on a full OTP 22 installation."
    post: "Full runtime dependencies of crypto-4.6: erts-9.0, kernel-5.3,\n stdlib-3.4"
    tickets:
      OTP-15884:
        release_note: "The implementation of crypto_one_time/4 is adjusted to match the type specification. The spec and the black-box behaviour of the function are unchanged.\n\nSome details: Both the spec and the implementation were correct seen separately. But with both of them combined simultaneously with crypto_one_time/5 which was called by the implementation of crypto_one_time/4, an (obvious) error was detected by a Dialyzer with more thorough checking than usual.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "crypto"
        RelatedIds: "ERL-974"
      OTP-15911:
        release_note: "When using crypto with FIPS mode enabled, the digests were not correctly handled.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "crypto"
      OTP-15924:
        release_note: "A memory leak in error handling code in ng_crypto_init_nif is fixed.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "crypto"
      OTP-15928:
        release_note: "Fixed the broken static build of the crypto nifs\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "crypto"
        RelatedIds: "PR-2296"
      OTP-13872:
        release_note: "*** HIGHLIGHT ***\n\nThe Message Authentication Codes (MAC) CMAC, HMAC and Poly1305 are unified into common functions in the New Crypto API. See the manual for CRYPTO.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "crypto"
  dialyzer-4.1:
    pre: "The dialyzer-4.1 application can be applied independently of other\n applications on a full OTP 22 installation."
    post: "Full runtime dependencies of dialyzer-4.1: compiler-7.0, erts-9.0,\n hipe-3.16.1, kernel-5.3, stdlib-3.4, syntax_tools-2.0, wx-1.2"
    tickets:
      OTP-15880:
        release_note: "Allow native compilation when using Dialyzer from Erlang. The options native (defaults to false) and native_cache have been added.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "dialyzer"
        RelatedIds: "PR-2283"
  erl_docgen-0.10:
    pre: "The erl_docgen-0.10 application can be applied independently of other\n applications on a full OTP 22 installation."
    post: "Full runtime dependencies of erl_docgen-0.10: edoc-0.7.13, erts-9.0,\n stdlib-3.4, xmerl-1.3.7"
    tickets:
      OTP-16051:
        release_note: "Update the documentation build support to handle FOP 2.1 .\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "erl_docgen, otp"
  erl_interface-3.13:
    pre: "The erl_interface-3.13 application can be applied independently of\n other applications on a full OTP 22 installation."
    post: ""
    tickets:
      OTP-15917:
        release_note: "Fix bugs in ei_print_term for binaries and bit strings causing incorrect output.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "erl_interface"
      OTP-15996:
        release_note: "Fixed bug in ei_decode_fun for very old fun encoding format. Bug exist since OTP 22.0.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "erl_interface"
      OTP-15814:
        release_note: "ei_print_term() now supports printing of maps and funs.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "erl_interface"
  erts-10.5:
    pre: "The erts-10.5 application can be applied independently of other\n applications on a full OTP 22 installation."
    post: "Full runtime dependencies of erts-10.5: kernel-6.1, sasl-3.3,\n stdlib-3.5"
    tickets:
      OTP-15370:
        release_note: "If you set {linger,{true,0}} on a gen_tcp listen socket, accept a connection on that socket, and then close the accepted socket, now the linger zero setting is transferred to the accepted socket. Before this correction that information was lost and the close behaviour on the accepted socket incorrect.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "erts"
        RelatedIds: "ERIERL-353"
      OTP-15422:
        release_note: "Sending ancillary data implemented in OTP-15747 accidentally left behind test code that caused all UDP sends to fail on Windows. This has now been fixed.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "erts"
        RelatedIds: "OTP-15747"
      OTP-15827:
        release_note: "In the socket nif, used invalid flags when if-def'ing for supported TCP flags: TCP_MAXSEG and TCP_NODELAY (the support function).\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "erts"
      OTP-15830:
        release_note: "Fixed memory leaks in experimental socket module.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "erts"
      OTP-15836:
        release_note: "re:run() now yields when validating utf8 in a large subject.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "erts, stdlib"
        RelatedIds: "ERL-876"
      OTP-15849:
        release_note: "Fixed bug in seq_trace:set_token(label,Term) which could cause VM crash if Term was heap allocated (not an atom, small integer, local pid or port). Bug exists since OTP 21.0 when terms other than small integers were first allowed as labels.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "erts"
        RelatedIds: "ERL-700"
      OTP-15852:
        release_note: "Extra -mode flags given to erl are ignored with a warning.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "erts, kernel"
      OTP-15853:
        release_note: "Don't loop indefinitely when --enable-pgo is given to configure, but compiler does not support pgo.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "erts"
        RelatedIds: "PR-2254"
      OTP-15859:
        release_note: "Fix seq_trace:print/2 not to raise badarg exception if label is not a small integer. Bug exists since OTP 21.0.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "erts"
        RelatedIds: "ERL-700"
      OTP-15874:
        release_note: "Fixed hipe_flush_icache_range for non-Linux OS on ARM.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "erts"
        RelatedIds: "ERL-958, PR-2266"
      OTP-15881:
        release_note: "The fix in OTP-15871 was too conservative and disabled the offending load-time optimization in some cases where it was safe.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "erts"
      OTP-15889:
        release_note: "Upgraded the ERTS internal PCRE library from version 8.42 to version 8.43. See http://pcre.org/original/changelog.txt for information about changes made to PCRE. This library implements major parts of the re regular expressions module.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "erts, stdlib"
      OTP-15901:
        release_note: "Fix race condition when closing a socket while using {active,N} on Windows.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "erts"
        RelatedIds: "ERL-960, PR-2272"
      OTP-15918:
        release_note: "Allow more than one -config command line option to erl on Windows to conform with other OS.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "erts"
        RelatedIds: "ERL-912"
      OTP-15931:
        release_note: "Fix so that ERL_FLAGS environment variable does not interfere with command line arguments. Before this fix you could write:\n\nERL_FLAGS=\"10\" erl +S\n\nand erlang would start as if +S had been given the argument 10.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "erts"
      OTP-15959:
        release_note: "The bug with ID ERL-717 has been fixed. The functions io:columns() and io:rows() only worked correctly inside interactive erlang shells before this fix. These functions returned {error,enotsup} before this fix even if stdout and stdin were connected to a terminal when they were invoked from an escript or a program started with e.g., erl -noshell.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "erts, stdlib"
        RelatedIds: "ERL-717"
      OTP-15971:
        release_note: "Do not use named label in ethread.c inline assemble. This allows erts to be compiled using gcc 9.1.0 with LTO enabled.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "erts"
        RelatedIds: "PR-2333"
      OTP-15975:
        release_note: "erlang:fun_to_list/1 will now escape the module and function name when necessary.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "erts"
        RelatedIds: "ERL-1009"
      OTP-15978:
        release_note: "process_info(P,binary) would neglect to look through heap fragments, potentially missing a few binaries associated with the process.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "erts"
        RelatedIds: "ERIERL-366"
      OTP-16037:
        release_note: "HiPE is now automatically disabled on systems with non-glibc implementation (for instance musl). This is because musl does not provide the API's for guaranteeing that signals are delivered on the correct native stack.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "erts"
      OTP-16041:
        release_note: "Fixed bug triggered if a process is killed during call to persistent_term:put or persistent_term:erase.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "erts"
      OTP-16042:
        release_note: "Add units to all memory slogans in the crash dump documentation.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "erts"
      OTP-16058:
        release_note: "Fix a bug in binary_to_term that would crash the emulator if a term larger than 16GB was to be decoded.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "erts"
        RelatedIds: "PR-2382"
      OTP-16060:
        release_note: "Fixed bug related to an exiting process sending EXIT and DOWN signals to remote linked/monitored processes. Bugs exists since OTP 22.0.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "erts"
      OTP-15738:
        release_note: "*** HIGHLIGHT ***\n\nerlc can now automatically use a compile server to avoid starting an Erlang system for each file to be compiled in a multi-file project. See the documentation for how to enable it.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "erts"
        RelatedIds: "PR-2361"
      OTP-15747:
        release_note: "The possibility to send ancillary data, in particular the TOS field, has been added to gen_udp:send/4,5.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "erts, kernel"
        RelatedIds: "ERIERL-294"
      OTP-15765:
        release_note: "The net module has been split into 'net' (kernel) and prim_net (preloaded).\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "erts, sasl"
      OTP-15818:
        release_note: "Socket counters now works as expected and can also be extracted with the (new) info function.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "erts"
      OTP-15831:
        release_note: "re:run() now avoids validating utf8 in the subject more than once in the same call. This validation could previously be performed multiple times when the global option was passed.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "erts, stdlib"
        RelatedIds: "ERL-876"
      OTP-15905:
        release_note: "The un-documented function erlang:dist_get_stat/1 now returns the real value of what the distribution queue contains instead of a boolean.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "erts"
        RelatedIds: "PR-2270"
      OTP-15906:
        release_note: "ETS ordered_set tables with write_concurrency enabled has got a performance issue fixed. There were no limits for the values of internal statistics counters before this fix. This could result in that the data structure sometimes reacted slowly to a change in how many parallel processes were using it.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "erts, stdlib"
      OTP-15926:
        release_note: "Optimize the reception of large distribution messages.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "erts"
        RelatedIds: "PR-2291"
      OTP-15977:
        release_note: "Binary matching and functions like split_binary/2 will now create heap binaries when the results are small enough, reducing the chances of small sub-binaries keeping large binaries alive.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "erts"
        RelatedIds: "ERIERL-366"
      OTP-15983:
        release_note: "Fixed rare emulator crash in instrument:allocations/0-1.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "erts"
      OTP-16001:
        release_note: "Ports could pass very small binaries as reference counted off heap binaries to processes. This could cause an unnecessary large memory usage and an unnecessary load on the binary allocator. Small binaries are now always passed as heap binaries to processes.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "erts"
        RelatedIds: "ERIERL-366"
      OTP-16002:
        release_note: "unicode:characters_to_binary() could return very small binaries as reference counted off heap binaries. This could cause an unnecessary large memory usage and an unnecessary load on the binary allocator. Small binaries are now always returned as heap binaries.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "erts, stdlib"
        RelatedIds: "ERIERL-366"
      OTP-16028:
        release_note: "Improved erl_nif documentation regarding on_load and Erlang stub/fallback functions.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "erts"
        RelatedIds: "PR-2362"
      OTP-16035:
        release_note: "New feature ets:info(_, binary) to get information about all reference counted binaries kept by a table. This is the same kind of debug information that process_info(_, binary) returns for a process.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "erts, stdlib"
        RelatedIds: "ERIERL-366"
  eunit-2.3.8:
    pre: "The eunit-2.3.8 application can be applied independently of other\n applications on a full OTP 22 installation."
    post: "Full runtime dependencies of eunit-2.3.8: erts-9.0, kernel-5.3,\n stdlib-3.4"
    tickets:
      OTP-16000:
        release_note: "Handle get_until request with explicit encoding in the implementation of the I/O protocol.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "eunit"
  ftp-1.0.3:
    pre: "The ftp-1.0.3 application can be applied independently of other\n applications on a full OTP 22 installation."
    post: "Full runtime dependencies of ftp-1.0.3: erts-7.0, kernel-6.0,\n stdlib-3.5"
    tickets:
      OTP-16056:
        release_note: "A possibly infinite loop when receiving messages divided in parts is removed.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "ftp"
  inets-7.1:
    pre: "The inets-7.1 application can be applied independently of other\n applications on a full OTP 22 installation."
    post: "Full runtime dependencies of inets-7.1: erts-6.0, kernel-3.0,\n mnesia-4.12, runtime_tools-1.8.14, ssl-5.3.4, stdlib-3.5"
    tickets:
      OTP-15893:
        release_note: "httpd - Accept singel LF as line terminator\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "inets"
        RelatedIds: "PR-2206"
      OTP-16049:
        release_note: "mod_esi will now always propagate the actual HTTP status code that it answered with, to later mod-modules, and not in some cases hardcode 200.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "inets"
        RelatedIds: "ERIERL-395"
  jinterface-1.10.1:
    pre: "The jinterface-1.10.1 application can be applied independently of\n other applications on a full OTP 22 installation."
    post: ""
    tickets:
      OTP-16050:
        release_note: "Replaced deprecated <tt> with <code> in documentation.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "jinterface"
  kernel-6.5:
    pre: "The kernel-6.5 application can be applied independently of other\n applications on a full OTP 22 installation."
    post: "Full runtime dependencies of kernel-6.5: erts-10.2.5, sasl-3.0,\n stdlib-3.5"
    tickets:
      OTP-15344:
        release_note: "The type specification for gen_sctp:connect/4,5 has been corrected.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "kernel"
        RelatedIds: "ERL-947"
      OTP-15852:
        release_note: "Extra -mode flags given to erl are ignored with a warning.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "erts, kernel"
      OTP-15858:
        release_note: "Fix type spec for seq_trace:set_token/2.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "kernel"
        RelatedIds: "ERL-700"
      OTP-15942:
        release_note: "logger:compare_levels/2 would fail with a badarg exception if given the values all or none as any of the parameters. This is now corrected.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "kernel"
        RelatedIds: "PR-2301"
      OTP-15997:
        release_note: "Fix bug where the log file in logger_std_h would not be closed when the inode of the file changed. This would in turn cause a file descriptor leak when tools like logrotate are used.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "kernel"
        RelatedIds: "PR-2331"
      OTP-16022:
        release_note: "Fix a race condition in the debugging function net_kernel:nodes_info/0.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "kernel"
      OTP-16023:
        release_note: "Fix race condition when closing a file opened in compressed or delayed_write mode.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "kernel"
      OTP-15747:
        release_note: "The possibility to send ancillary data, in particular the TOS field, has been added to gen_udp:send/4,5.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "erts, kernel"
        RelatedIds: "ERIERL-294"
      OTP-15850:
        release_note: "If the log file was given with relative path, the standard logger handler (logger_std_h) would store the file name with relative path. If the current directory of the node was later changed, a new file would be created relative the new current directory, potentially failing with an enoent if the new directory did not exist. This is now corrected and logger_std_h always stores the log file name as an absolute path, calculated from the current directory at the time of the handler startup.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "kernel"
      OTP-15935:
        release_note: "Support local sockets with inet:i/0.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "kernel"
        RelatedIds: "PR-2299"
  megaco-3.18.6:
    pre: "The megaco-3.18.6 application can be applied independently of other\n applications on a full OTP 22 installation."
    post: "Full runtime dependencies of megaco-3.18.6: asn1-3.0, debugger-4.0,\n erts-7.0, et-1.5, kernel-3.0, runtime_tools-1.8.14, stdlib-2.5"
    tickets:
      OTP-15882:
        release_note: "Fix various minor issues related to Dialyzer. Mostly these are dialyzer warnings, but there was also some minor bugs detected by Dialyzer.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "megaco"
  mnesia-4.16.1:
    pre: "The mnesia-4.16.1 application can be applied independently of other\n applications on a full OTP 22 installation."
    post: "Full runtime dependencies of mnesia-4.16.1: erts-9.0, kernel-5.3,\n stdlib-3.4"
    tickets:
      OTP-15933:
        release_note: "mnesia:add_table_copy/3 could cause a deadlock if called when a new node was starting.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "mnesia"
        RelatedIds: "ERL-872"
      OTP-15979:
        release_note: "*** POTENTIAL INCOMPATIBILITY ***\n\nTransactions with sticky locks could with async_asym transactions be committed in the wrong order, since asym transaction are spawned on the remote nodes.\n\nTo fix this bug the communication protocol between mnesia nodes had to be updated, thus mnesia will no longer be able to connect to nodes earlier than mnesia-4.14 , OTP-19.0.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "mnesia"
        RelatedIds: "ERL-768"
  observer-2.9.2:
    pre: "The observer-2.9.2 application can be applied independently of other\n applications on a full OTP 22 installation."
    post: "Full runtime dependencies of observer-2.9.2: erts-7.0, et-1.5,\n kernel-3.0, runtime_tools-1.8.14, stdlib-3.5, wx-1.2"
    tickets:
      OTP-15980:
        release_note: "Fix bug after a user followed link on a pid from an expanded term window.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "observer"
        RelatedIds: "PR-2201"
      OTP-15916:
        release_note: "Improved dark mode colors on Linux.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "observer"
        RelatedIds: "ERL-921"
  os_mon-2.5.1:
    pre: "The os_mon-2.5.1 application can be applied independently of other\n applications on a full OTP 22 installation."
    post: "Full runtime dependencies of os_mon-2.5.1: erts-6.0, kernel-3.0,\n sasl-2.4, stdlib-2.0"
    tickets:
      OTP-15778:
        release_note: "Fix disk_sup to ignore squashfs on Linux when determining if a mounted filesystem is full or not.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "os_mon"
      OTP-15974:
        release_note: "Fix bug where cpu_sup:util() always returned 100% on systems not using gnu libc, for example Alpine OS.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "os_mon"
        RelatedIds: "ERL-1012"
  public_key-1.7:
    pre: "The public_key-1.7 application can be applied independently of other\n applications on a full OTP 22 installation."
    post: "Full runtime dependencies of public_key-1.7: asn1-3.0, crypto-3.8,\n erts-6.0, kernel-3.0, stdlib-3.5"
    tickets:
      OTP-15870:
        release_note: "Support Password based encryption with AES\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "public_key"
        RelatedIds: "ERL-952"
      OTP-15843:
        release_note: "Change dialyzer spec to avoid confusion\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "public_key"
        RelatedIds: "ERL-915"
  runtime_tools-1.14:
    pre: "The runtime_tools-1.14 application can be applied independently of\n other applications on a full OTP 22 installation."
    post: "Full runtime dependencies of runtime_tools-1.14: erts-8.0,\n kernel-5.0, mnesia-4.12, stdlib-3.0"
    tickets:
      OTP-16044:
        release_note: "Fix dbg:stop_clear/0 to also clear trace events (send and 'receive').\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "runtime_tools"
  sasl-3.4.1:
    pre: "The sasl-3.4.1 application can be applied independently of other\n applications on a full OTP 22 installation."
    post: "Full runtime dependencies of sasl-3.4.1: erts-10.2, kernel-5.3,\n stdlib-3.4, tools-2.6.14"
    tickets:
      OTP-15765:
        release_note: "The net module has been split into 'net' (kernel) and prim_net (preloaded).\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "erts, sasl"
  snmp-5.4:
    pre: "The snmp-5.4 application can be applied independently of other\n applications on a full OTP 22 installation."
    post: "Full runtime dependencies of snmp-5.4: crypto-3.3, erts-6.0,\n kernel-3.0, mnesia-4.12, runtime_tools-1.8.14, stdlib-2.5"
    tickets:
      OTP-15932:
        release_note: "Fix various minor issues related to Dialyzer. Mostly these are dialyzer warnings, but there was also some minor bugs detected by Dialyzer.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "snmp"
      OTP-10400:
        release_note: "Fixed a dets usage problem detected by dialyzer.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "snmp"
        RelatedIds: "[164], kunagi-253"
      OTP-15330:
        release_note: "The function snmp:print_version_info() prints various version info. For each module a number of items are printed, such as app vsn and md5 digest. And an attempt was also made to print \"compile time\". This used to be available in the module_info for each module, but has now been removed.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "snmp"
      OTP-15331:
        release_note: "The use of the deprecated random module has been replaced the with rand module.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "snmp"
      OTP-15332:
        release_note: "Removed use of the deprecated function erlang:get_stacktrace(). Instead make use of the 'catch Class:Error:Stacktrace' feature.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "snmp"
  ssh-4.8:
    pre: "The ssh-4.8 application can be applied independently of other\n applications on a full OTP 22 installation."
    post: "Full runtime dependencies of ssh-4.8: crypto-4.5, erts-9.0,\n kernel-5.3, public_key-1.6.1, stdlib-3.4.1"
    tickets:
      OTP-15820:
        release_note: "Fixed wrong type definition for the daemon option subsystems.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "ssh"
      OTP-15962:
        release_note: "Fixed a possible SSH logging crash if there was a problem in an early stage of session setup.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "ssh"
        RelatedIds: "ERL-990"
      OTP-15395:
        release_note: "The documentation for the modules ssh_connection, ssh_sftp and ssh_sftpd are now generated from the -spec:s.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "ssh"
      OTP-15876:
        release_note: "Internal cleanup including removal of the internal file ssh_userauth.hrl.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "ssh"
        RelatedIds: "PR-2255, PR-2256"
      OTP-15929:
        release_note: "Removed unused definitions in ssh.hrl.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "ssh"
        RelatedIds: "PR-2297"
      OTP-15984:
        release_note: "Removed unused fields in the internal #connection{} record.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "ssh"
      OTP-16040:
        release_note: "To get information of a connection_ref() from for example ssh:connect/3, there was previously one function available namely ssh:connection_info/2. This ticket adds ssh:connection_info/1 which returns all information.\n\nFor daemons (servers) started with for example ssh:daemon/2 the function ssh:daemon_info/1 returning all information was available. This ticket adds ssh:daemon_info/2 which returns only the information specified in the second argument.\n\nThe info of connections and of daemons now also includes the item 'options'. Only those options that does not have their default values are returned.\n\nFor a connection also the items 'algorithms' and 'channels' are added.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "ssh"
  ssl-9.4:
    pre: "The ssl-9.4 application can be applied independently of other\n applications on a full OTP 22 installation."
    post: "Full runtime dependencies of ssl-9.4: crypto-4.2, erts-10.0,\n inets-5.10.7, kernel-6.0, public_key-1.5, stdlib-3.5"
    tickets:
      OTP-15328:
        release_note: "Handling of zero size fragments in TLS could cause an infinite loop. This has now been corrected.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "ssl"
        RelatedIds: "ERIERL-379"
      OTP-15807:
        release_note: "DTLS record check needs to consider that a resent hello message can have a different version than the negotiated.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "ssl"
        RelatedIds: "ERL-920"
      OTP-15431:
        release_note: "*** HIGHLIGHT ***\n\nBasic support for TLS 1.3 Client for experimental use. For more information see the Standards Compliance chapter of the User's Guide.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "ssl"
      OTP-15823:
        release_note: "Correct solution for retaining tcp flow control OTP-15802 (ERL-934) as to not break ssl:recv as reported in (ERL-938)\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "ssl"
        RelatedIds: "ERL-934, ERL-938"
      OTP-15851:
        release_note: "Enhance dialyzer specs to reflect implementation better and avoid dialyzer warnings for the user that wants to use TLS with unix domain sockets.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "ssl"
        RelatedIds: "PR-2235"
      OTP-15854:
        release_note: "Add support for ECDSA signature algorithms in TLS 1.3.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "ssl"
      OTP-16027:
        release_note: "Correct error handling of TLS downgrade, possible return values form ssl:close/2 when downgrading is {ok, Port} or {error, Reason}, it could happen that only ok was returned instead of {error, closed} when downgrade failed due to that the peer closed the TCP connection.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "ssl"
  stdlib-3.10:
    pre: "Note! The stdlib-3.10 application *cannot* be applied independently\n       of other applications on an arbitrary OTP 22 installation.\n\n       On a full OTP 22 installation, also the following runtime\n       dependency has to be satisfied:\n       -- erts-10.5 (first satisfied in OTP 22.1)"
    post: "Full runtime dependencies of stdlib-3.10: compiler-5.0, crypto-3.3,\n erts-10.5, kernel-6.0, sasl-3.0"
    tickets:
      OTP-15836:
        release_note: "re:run() now yields when validating utf8 in a large subject.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "erts, stdlib"
        RelatedIds: "ERL-876"
      OTP-15889:
        release_note: "Upgraded the ERTS internal PCRE library from version 8.42 to version 8.43. See http://pcre.org/original/changelog.txt for information about changes made to PCRE. This library implements major parts of the re regular expressions module.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "erts, stdlib"
      OTP-15959:
        release_note: "The bug with ID ERL-717 has been fixed. The functions io:columns() and io:rows() only worked correctly inside interactive erlang shells before this fix. These functions returned {error,enotsup} before this fix even if stdout and stdin were connected to a terminal when they were invoked from an escript or a program started with e.g., erl -noshell.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "erts, stdlib"
        RelatedIds: "ERL-717"
      OTP-15987:
        release_note: "Fixed handling of \"..\" and \"@\" in wildcards. \"..\" would only work when preceded by a literal pattern such as in \"a/..\", not when preceded by wildcard characters such as in \"*/..\". The combination \"@/..\" was also broken, and in addition \"@\" in a pattern could degrade performance of the wildcard matching.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "stdlib"
        RelatedIds: "ERL-1029"
      OTP-15992:
        release_note: "Make sure ets:fun2ms() can handle ++/2 in the head of functions when called from the shell.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "stdlib"
        RelatedIds: "PR-2322"
      OTP-15510:
        release_note: "*** POTENTIAL INCOMPATIBILITY ***\n\nDebugging of time-outs in gen_statem has been improved. Starting a time-out is now logged in sys:log and sys:trace. Running time-outs are visible in server crash logs, and with sys:get_status. Due to this system events {start_timer, Action, State} and {insert_timout, Event, State} have been added, which may surprise tools that rely on the format of these events.\n\nNew features: The EventContent of a running time-out can be updated with {TimeoutType, update, NewEventContent}. Running time-outs can be cancelled with {TimeoutType, cancel} which is more readable than using Time = infinity.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "stdlib"
      OTP-15831:
        release_note: "re:run() now avoids validating utf8 in the subject more than once in the same call. This validation could previously be performed multiple times when the global option was passed.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "erts, stdlib"
        RelatedIds: "ERL-876"
      OTP-15906:
        release_note: "ETS ordered_set tables with write_concurrency enabled has got a performance issue fixed. There were no limits for the values of internal statistics counters before this fix. This could result in that the data structure sometimes reacted slowly to a change in how many parallel processes were using it.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "erts, stdlib"
      OTP-15927:
        release_note: "The ordsets:union/1 is now faster when passed a long list of ordsets.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "stdlib"
      OTP-16002:
        release_note: "unicode:characters_to_binary() could return very small binaries as reference counted off heap binaries. This could cause an unnecessary large memory usage and an unnecessary load on the binary allocator. Small binaries are now always returned as heap binaries.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "erts, stdlib"
        RelatedIds: "ERIERL-366"
      OTP-16006:
        release_note: "Display a more meaningful error message when a bad I/O server is used in a script written in Erlang (escript).\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "stdlib"
        RelatedIds: "ERL-992"
      OTP-16035:
        release_note: "New feature ets:info(_, binary) to get information about all reference counted binaries kept by a table. This is the same kind of debug information that process_info(_, binary) returns for a process.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "erts, stdlib"
        RelatedIds: "ERIERL-366"
      OTP-16038:
        release_note: "Corrected ETS documentation about the behavior of compiled match specifications when serialized through external format.\n\n"
        type: " --- Improvements and New Features ---"
        Applications: "stdlib"
        RelatedIds: "PR-2366"
  syntax_tools-2.2.1:
    pre: "The syntax_tools-2.2.1 application can be applied independently of\n other applications on a full OTP 22 installation."
    post: "Full runtime dependencies of syntax_tools-2.2.1: compiler-7.0,\n erts-9.0, kernel-5.0, stdlib-3.4"
    tickets:
      OTP-16012:
        release_note: "Add missing calls to erl_syntax:unwrap/1. The nodes concerned represent names and values of maps and map types.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "syntax_tools"
        RelatedIds: "PR-2348"
  tools-3.2.1:
    pre: "The tools-3.2.1 application can be applied independently of other\n applications on a full OTP 22 installation."
    post: "Full runtime dependencies of tools-3.2.1: compiler-5.0, erts-9.1,\n kernel-5.4, runtime_tools-1.8.14, stdlib-3.4"
    tickets:
      OTP-15813:
        release_note: "cover would fail to start if two processes tried to start it at the exact same time.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "tools"
        RelatedIds: "ERL-943"
  wx-1.8.9:
    pre: "The wx-1.8.9 application can be applied independently of other\n applications on a full OTP 22 installation."
    post: "Full runtime dependencies of wx-1.8.9: erts-6.0, kernel-3.0,\n stdlib-2.0"
    tickets:
      OTP-15883:
        release_note: "Fix a driver bug that could crashes when allocating memory.\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "wx"
        RelatedIds: "PR-2261"
  xmerl-1.3.22:
    pre: "The xmerl-1.3.22 application can be applied independently of other\n applications on a full OTP 22 installation."
    post: "Full runtime dependencies of xmerl-1.3.22: erts-6.0, kernel-3.0,\n stdlib-2.5"
    tickets:
      OTP-15826:
        release_note: "xmerl_sax_parser crashed during charset detection when the xml declarations attribute values was missing the closing quotation (&apos; or &quot;).\n\n"
        type: " --- Fixed Bugs and Malfunctions ---"
        Applications: "xmerl"
Application:
  - common_test-1.18
  - compiler-7.4.5
  - crypto-4.6
  - dialyzer-4.1
  - erl_docgen-0.10
  - erl_interface-3.13
  - erts-10.5
  - eunit-2.3.8
  - ftp-1.0.3
  - inets-7.1
  - jinterface-1.10.1
  - kernel-6.5
  - megaco-3.18.6
  - mnesia-4.16.1
  - observer-2.9.2
  - os_mon-2.5.1
  - public_key-1.7
  - runtime_tools-1.14
  - sasl-3.4.1
  - snmp-5.4
  - ssh-4.8
  - ssl-9.4
  - stdlib-3.10
  - syntax_tools-2.2.1
  - tools-3.2.1
  - wx-1.8.9
  - xmerl-1.3.22
Date: 2019-09-17
GitTag: OTP-22.1
PatchPackage: OTP 22.1
Predecessor: OTP 22.0.7
Release: 22
Seqnum:
  - ERIERL-294
  - ERIERL-350
  - ERIERL-353
  - ERIERL-366
  - ERIERL-370
  - ERIERL-379
  - ERIERL-395
  - ERL-1009
  - ERL-1012
  - ERL-1013
  - ERL-1014
  - ERL-1017
  - ERL-1022
  - ERL-1026
  - ERL-1029
  - ERL-700
  - ERL-717
  - ERL-768
  - ERL-872
  - ERL-876
  - ERL-912
  - ERL-915
  - ERL-920
  - ERL-921
  - ERL-934
  - ERL-938
  - ERL-943
  - ERL-947
  - ERL-952
  - ERL-958
  - ERL-960
  - ERL-974
  - ERL-990
  - ERL-992
  - ERL-995
  - ERL-997
System: OTP
TroubleReportId:
  - OTP-10400
  - OTP-13872
  - OTP-15328
  - OTP-15330
  - OTP-15331
  - OTP-15332
  - OTP-15344
  - OTP-15370
  - OTP-15395
  - OTP-15422
  - OTP-15431
  - OTP-15510
  - OTP-15738
  - OTP-15747
  - OTP-15765
  - OTP-15778
  - OTP-15789
  - OTP-15807
  - OTP-15813
  - OTP-15814
  - OTP-15818
  - OTP-15820
  - OTP-15823
  - OTP-15826
  - OTP-15827
  - OTP-15830
  - OTP-15831
  - OTP-15833
  - OTP-15836
  - OTP-15843
  - OTP-15849
  - OTP-15850
  - OTP-15851
  - OTP-15852
  - OTP-15853
  - OTP-15854
  - OTP-15858
  - OTP-15859
  - OTP-15863
  - OTP-15869
  - OTP-15870
  - OTP-15874
  - OTP-15876
  - OTP-15880
  - OTP-15881
  - OTP-15882
  - OTP-15883
  - OTP-15884
  - OTP-15889
  - OTP-15893
  - OTP-15901
  - OTP-15905
  - OTP-15906
  - OTP-15911
  - OTP-15916
  - OTP-15917
  - OTP-15918
  - OTP-15923
  - OTP-15924
  - OTP-15926
  - OTP-15927
  - OTP-15928
  - OTP-15929
  - OTP-15931
  - OTP-15932
  - OTP-15933
  - OTP-15934
  - OTP-15935
  - OTP-15942
  - OTP-15954
  - OTP-15959
  - OTP-15962
  - OTP-15963
  - OTP-15966
  - OTP-15968
  - OTP-15969
  - OTP-15970
  - OTP-15971
  - OTP-15974
  - OTP-15975
  - OTP-15977
  - OTP-15978
  - OTP-15979
  - OTP-15980
  - OTP-15982
  - OTP-15983
  - OTP-15984
  - OTP-15985
  - OTP-15987
  - OTP-15992
  - OTP-15996
  - OTP-15997
  - OTP-16000
  - OTP-16001
  - OTP-16002
  - OTP-16006
  - OTP-16012
  - OTP-16022
  - OTP-16023
  - OTP-16027
  - OTP-16028
  - OTP-16035
  - OTP-16037
  - OTP-16038
  - OTP-16040
  - OTP-16041
  - OTP-16042
  - OTP-16044
  - OTP-16049
  - OTP-16050
  - OTP-16051
  - OTP-16056
  - OTP-16058
  - OTP-16060
---
## OTP-22.1
