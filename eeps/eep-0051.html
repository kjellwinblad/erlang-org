<!DOCTYPE html>
<html lang="en">



<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- Allow pinning of website on windows -->
    <meta name="application-name" content="Erlang.org">
    <meta name="msapplication-tooltip" content="The official home of the Erlang Programming Language">
    <meta name="msapplication-starturl" content="/" >

    <!-- Make the site look nicer on facebook -->
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Erlang.org">
    <meta property="og:title" content="Welcome to Erlang.org">
    <meta property="og:description" content="The official home of the Erlang Programming Language">
    <meta property="og:image" content="https://beta.erlang.org/assets/img/erlang-228x200.png">
    <meta property="og:image:secure_url" content="https://beta.erlang.org/assets/img/erlang-228x200.png">
    <meta property="og:url" content="https://beta.erlang.org/">

    <!-- Twitter metadata -->
    <meta name="twitter:card" content="summary" />
    <meta property="twitter:title" content="Index" />
    <meta name="twitter:site" content="@erlang_org" />

    <!-- Rich data for google search -->
    <script type="application/ld+json">
{"@type":"WebSite","url":"https://erlang.org/","headline":"Eep 0051 - Erlang/OTP","name":"Erlang.org","sameAs":["https://twitter.com/erlang_org","https://github.com/erlang/otp"],"@context":"https://schema.org"}</script>

    <title>Eep 0051 - Erlang/OTP</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- tells iOS browsers to not show telephone numbers as links -->
    <meta name="format-detection" content="telephone=no">

    <meta name="application-name" content="Erlang.org">
    <meta name="description" content="The official home of the Erlang Programming Language">
    <meta name="keywords" content="Erlang programming language functional parallel distributed documentation download community">
    <!-- https://www.rssboard.org/rss-autodiscovery -->
    <link rel="alternate" type="application/atom+xml" title="News Atom Feed" href="https://beta.erlang.org/news.xml" />
    <link rel="alternate" type="application/atom+xml" title="Blog Atom Feed" href="https://beta.erlang.org/blog.xml" />
    
    <link rel="stylesheet" href="/assets/css/main.css">
</head>

<body>
    <header class="navbar navbar-expand-lg navbar-light bg-body">
        <nav class="container">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <a class="navbar-brand" href="/"><img
                    src="/assets/img/erlang.png" class="img-fluid" width="60" alt="Erlang.org main page"/></a>
            <div class="collapse navbar-collapse fw-bold" id="navbarSupportedContent">
                <ul class="navbar-nav text-uppercase me-auto mb-2 mb-lg-0">
                    <li class="nav-item"><a class="nav-link" href="/downloads">Download</a></li>
                    <li class="nav-item"><a class="nav-link" href="/docs">Documentation</a></li>
                    <li class="nav-item"><a class="nav-link" href="/community">Community</a></li>
                    <li class="nav-item"><a class="nav-link" href="/news">News</a></li>
                    <li class="nav-item"><a class="nav-link" href="/blog">Blog</a></li>
                    <li class="nav-item"><a class="nav-link" href="/eep">EEP</a></li>
                    <li class="nav-item"><a class="nav-link" href="/about">About</a></li>
                </ul>
                <form class="d-flex" role="search" method="get" action="https://duckduckgo.com/">
                    <input type="hidden" name="sites" value="erlang.org">
                    <input class="form-control me-2" id="searchfield" name="q" type="search" placeholder="Search erlang.org"
                        aria-label="Search">
                    <button class="btn btn-outline-primary" type="submit">Search</button>
                </form>
            </div>
        </nav>
    </header>
    <div class="container border-top pt-4">
    <div class="row-lg">
        <div class="col-lg-10 offset-lg-1">
            <div class="card">
                <div class="card-body">
                    <dl class="mb-0 dl-single">
                        <dt>Author:</dt>
                        <dd>
                            Sergey Prokhorov &lt;seriy(dot)pr(at)gmail(dot)com&gt;
                            
                            
                        </dd>
                        
                        <dt>Status:</dt>
                        <dd>Accepted/23.0 Proposal is to be implemented in OTP release 23.0</dd>
                        <dt>Type:</dt>
                        <dd>Standards Track</dd>
                        
                        
                        <dt>Created:</dt>
                        <dd>07-Oct-2019</dd>
                        
                        <dt>Erlang-Version:</dt>
                        <dd>23.0</dd>
                        
                        
                        
                        
                    </dl>
                </div>
            </div>
            <div class="border-top mt-4">
                
                <h2 id="eep-51-underscore-digit-separator-in-numeric-literals">
        
        
          EEP 51: Underscore digit separator in numeric literals <a href="#eep-51-underscore-digit-separator-in-numeric-literals">#</a>
        
        
      </h2>
    
      <h1 id="abstract">
        
        
          Abstract <a href="#abstract">#</a>
        
        
      </h1>
    

<p>This EEP extends numeric literal syntax, allowing underscore <code>_</code> as digits
separator. It extends syntax of integer, float and based integer literals.</p>
      <h1 id="copyright">
        
        
          Copyright <a href="#copyright">#</a>
        
        
      </h1>
    

<p>This document has been placed in the public domain.</p>
      <h1 id="specification">
        
        
          Specification <a href="#specification">#</a>
        
        
      </h1>
    

<p>Current syntax for numeric literals can be described by following scheme:</p>

<pre><code class="language-erlang">DIGIT = [0-9]
BASE_DIGIT = [0-9a-zA-Z]
SIGN = [+-]

INTEGER = SIGN? DIGIT+

FLOAT = SIGN? DIGIT+ '.' DIGIT+ ('e' SIGN? DIGIT+)?

BASED_INTEGER = SIGN? DIGIT+ '#' BASE_DIGIT+
</code></pre>

<p>EEP extends this syntax by allowing single underscore <code>_</code> character as a
separator between two <code>DIGIT</code> or <code>BASE_DIGIT</code> characters. I.e., characters from
both left and right sides of <code>_</code> should be digits. Leading, trailing or repeated
underscores should not be allowed as well as underscores next to <code>-</code> <code>.</code> <code>#</code> <code>e</code>.
Separator is only used to visually separate groups of characters. It doesn’t
change semantics of literal and is removed by lexer.</p>

<p>Following are examples of valid numeric literals:</p>

<pre><code class="language-erlang">123_456
1_2_3_4_5
123_456.789_123
1.0e1_23
16#DEAD_BEEF
2#1100_1010_0011
</code></pre>

<p>And following are examples of literals that are not allowed:</p>

<pre><code class="language-erlang">_123  % will be interpreted as variable name
123_
123__456  % only single underscore allowed
123_.456  % underscore can only separate digits, not other symbols
123._456
16#_1234
16#1234_
</code></pre>

<p>The underscores are to be lost when representing abstract forms or terms as
strings (<code>erl_pp</code>, <code>io_lib</code>).</p>
      <h1 id="motivation">
        
        
          Motivation <a href="#motivation">#</a>
        
        
      </h1>
    

<p>Digit separator becomes especially handy for relatively long literals like
thousands separator for decimals <code>Million = 1_000_000</code>, <code>SecondsInDay = 86_400</code>
byte separator for hexadecimal <code>16#DEAD_BEEF_CAFE</code>. Group separator makes
such literals more readable (when used wisely) and makes it easier to visually
spot typos like <code>MicroSecond = Second * 100000</code>.
The digit separator feature was adopted by multiple programming languages
starting from at least Ada83.</p>
      <h1 id="rationale">
        
        
          Rationale <a href="#rationale">#</a>
        
        
      </h1>
    

<p>Underscore character was chosen as separator because it is used by multiple
other languages such as “Ada 83”, “C#”, “Java 7”, “Perl 2.0”, “Python 3.6”,
“Ruby”, “Rust”, “Swift” and “Go”. Also it doesn’t conflict with current Erlang
syntax (unlike, for example, <code>,</code>).
The only ambiguous decision was about where exactly digit separators should be
allowed. It was decided that underscore should be allowed only between digits
as meant by being a “digit separator”.</p>
      <h1 id="backwards-compatibility">
        
        
          Backwards Compatibility <a href="#backwards-compatibility">#</a>
        
        
      </h1>
    

<p>All existing Erlang code remains acceptable. The implementation is done
entirely in the Erlang lexer, so, no changes are needed in parser and
even tools that examine ASTs will be unaffected.
External tools like code editors and syntax highlighters might need to be
updated to be able to recognize new syntax for numeric literals.</p>
      <h1 id="reference-implementation">
        
        
          Reference Implementation <a href="#reference-implementation">#</a>
        
        
      </h1>
    

<p>The reference implementation is provided in a form of pull-request on GitHub</p>

<pre><code class="language-erlang">https://github.com/erlang/otp/pull/2324
</code></pre>

            </div>
        </div>
    </div>
</div>
<script src="/assets/js/prismjs/prism.js"></script>
<script src="/assets/js/prismjs/components/prism-erlang.js"></script>
    <footer class="container-fluid footer text-center border-top border-bottom">
        <div>
            <a href="/downloads.html" title="DOWNLOAD"><img src="/assets/img/download.png" alt="Download Erlang/OTP"></a>
        </div>
        <div>
            <a href="http://www.github.com/erlang/otp"><img
                    src="/assets/img/GitHub-Mark-32px.png" alt="Erlang/OTP on Github"></a>
        </div>
        
        <div>
            <a href="http://www.twitter.com/erlang_org"><img src="/assets/img/twitter.png"
                    width="32" alt="Erlang/OTP twitter"></a>
        </div>
    </footer>
    <script src="/assets/js/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>