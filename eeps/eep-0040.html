<!DOCTYPE html>
<html lang="en">



<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- Allow pinning of website on windows -->
    <meta name="application-name" content="Erlang.org">
    <meta name="msapplication-tooltip" content="The official home of the Erlang Programming Language">
    <meta name="msapplication-starturl" content="/" >

    <!-- Make the site look nicer on facebook -->
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Erlang.org">
    <meta property="og:title" content="Welcome to Erlang.org">
    <meta property="og:description" content="The official home of the Erlang Programming Language">
    <meta property="og:image" content="https://beta.erlang.org/assets/img/erlang-228x200.png">
    <meta property="og:image:secure_url" content="https://beta.erlang.org/assets/img/erlang-228x200.png">
    <meta property="og:url" content="https://beta.erlang.org/">

    <!-- Twitter metadata -->
    <meta name="twitter:card" content="summary" />
    <meta property="twitter:title" content="Index" />
    <meta name="twitter:site" content="@erlang_org" />

    <!-- Rich data for google search -->
    <script type="application/ld+json">
{"@type":"WebSite","url":"https://erlang.org/","headline":"Eep 0040 - Erlang/OTP","name":"Erlang.org","sameAs":["https://twitter.com/erlang_org","https://github.com/erlang/otp"],"@context":"https://schema.org"}</script>

    <title>Eep 0040 - Erlang/OTP</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- tells iOS browsers to not show telephone numbers as links -->
    <meta name="format-detection" content="telephone=no">

    <meta name="application-name" content="Erlang.org">
    <meta name="description" content="The official home of the Erlang Programming Language">
    <meta name="keywords" content="Erlang programming language functional parallel distributed documentation download community">
    <!-- https://www.rssboard.org/rss-autodiscovery -->
    <link rel="alternate" type="application/atom+xml" title="News Atom Feed" href="https://beta.erlang.org/news.xml" />
    <link rel="alternate" type="application/atom+xml" title="Blog Atom Feed" href="https://beta.erlang.org/blog.xml" />
    
    <link rel="stylesheet" href="/assets/css/main.css">
</head>

<body>
    <header class="navbar navbar-expand-lg navbar-light bg-body">
        <nav class="container">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <a class="navbar-brand" href="/"><img
                    src="/assets/img/erlang.png" class="img-fluid" width="60" alt="Erlang.org main page"/></a>
            <div class="collapse navbar-collapse fw-bold" id="navbarSupportedContent">
                <ul class="navbar-nav text-uppercase me-auto mb-2 mb-lg-0">
                    <li class="nav-item"><a class="nav-link" href="/downloads">Download</a></li>
                    <li class="nav-item"><a class="nav-link" href="/docs">Documentation</a></li>
                    <li class="nav-item"><a class="nav-link" href="/community">Community</a></li>
                    <li class="nav-item"><a class="nav-link" href="/news">News</a></li>
                    <li class="nav-item"><a class="nav-link" href="/blog">Blog</a></li>
                    <li class="nav-item"><a class="nav-link" href="/eep">EEP</a></li>
                    <li class="nav-item"><a class="nav-link" href="/about">About</a></li>
                </ul>
                <form class="d-flex" role="search" method="get" action="https://duckduckgo.com/">
                    <input type="hidden" name="sites" value="erlang.org">
                    <input class="form-control me-2" id="searchfield" name="q" type="search" placeholder="Search erlang.org"
                        aria-label="Search">
                    <button class="btn btn-outline-primary" type="submit">Search</button>
                </form>
            </div>
        </nav>
    </header>
    <div class="container border-top pt-4">
    <div class="row-lg">
        <div class="col-lg-10 offset-lg-1">
            <div class="card">
                <div class="card-body">
                    <dl class="mb-0 dl-single">
                        <dt>Author:</dt>
                        <dd>
                            Richard A. O&#39;Keefe &lt;ok(at)cs(dot)otago(dot)ac(dot)nz&gt;
                            
                            
                        </dd>
                        
                        <dt>Status:</dt>
                        <dd>Draft </dd>
                        <dt>Type:</dt>
                        <dd>Standards Track</dd>
                        
                        
                        <dt>Created:</dt>
                        <dd>19-Oct-2012</dd>
                        
                        
                        <dt>Post-History:</dt>
                        <dd>19-Oct-2012</dd>
                        
                        
                        
                    </dl>
                </div>
            </div>
            <div class="border-top mt-4">
                
                <h2 id="eep-40-a-proposal-for-unicode-variable-and-atom-names-in-erlang">
        
        
          EEP 40: A proposal for Unicode variable and atom names in Erlang <a href="#eep-40-a-proposal-for-unicode-variable-and-atom-names-in-erlang">#</a>
        
        
      </h2>
    
      <h1 id="abstract">
        
        
          Abstract <a href="#abstract">#</a>
        
        
      </h1>
    

<p>This EEP proposes how to extend variable and atom names in Erlang
to contain Unicode characters in a backwards compatible way.</p>
      <h1 id="forces">
        
        
          Forces <a href="#forces">#</a>
        
        
      </h1>
    

<ol>
  <li>Support for Unicode continues to increase, with
minimal source code support about to arrive.</li>
  <li>Unicode variable names and unquoted atoms are not
here yet, so now is the time to settle on a design.</li>
  <li>They will need to come.  There may be legal or
institutional reasons why unicode-capable languages
are required.  Some people just want to use their
own language and script.  Erlang’s strength in
network applications means that being able to
represent Internationalized Domain Names as unquoted
atoms would be just as much of a convenience as
being able to represent ASCII domain names like
www.example.com (which needs no quotes in Erlang) is.</li>
  <li>There is a framework for Unicode identifiers in <a href="http://www.unicode.org/reports/tr31/" title="Unicode Standard Annex 31">UAX#31</a>,
used by several programming languages, including Ada, Java,
C++, C, C#, Javascript, and Python (section 2.3 of <a href="http://docs.python.org/release/3.1.5/reference/lexical_analysis.html" title="Python Lexical Analysis">Python Lexical</a>,
and see also <a href="http://www.python.org/dev/peps/pep-3131/" title="Python Enhancement Proposal 3131">PEP 3131</a>).</li>
  <li>Existing Erlang identifiers should remain valid,
including ones containing “@” and “.”.</li>
  <li>Existing Erlang support features, such as ignoring
variables that start with underscore when reporting
singleton variables, should not be broken.</li>
  <li>We should not “steal” any characters to use as “magic
markers” for variables because they might be needed for
other purposes.  A good (bad) example of this is “?”, which
could be used for several things if it were not used for macros.</li>
  <li>Character sequences in Latin-1 that are not legal variable or
atom names now should not be made into such by this specification.</li>
</ol>
      <h1 id="reference">
        
        
          Reference <a href="#reference">#</a>
        
        
      </h1>
    

<p>Names of sets of characters, XID_Start, XID_Continue, Lu, Lt, Lo, Pc,
Other_Id_Start, are drawn from <a href="http://www.unicode.org/versions/Unicode6.2.0/" title="The Unicode Standard version 6.2.0">Unicode</a> and <a href="http://www.unicode.org/reports/tr31/" title="Unicode Standard Annex 31">UAX#31</a>.</p>

<pre><code class="language-erlang">    Lu = upper case letters
    Lt = title case letters
    Ll = lower case letters
    Lo = non-case letters (Arabic, Chinese, and so on)
    Pc = connector punctuators, including the low line (_) and
         a number of other characters like undertie (‿).
    Other_Id_Start = script capital p, estimated symbol,
         katakana-hiragana voiced sound mark, and
         katakana-hiragana semi-voiced sound mark.
</code></pre>
      <h1 id="specification">
        
        
          Specification <a href="#specification">#</a>
        
        
      </h1>
    
      <h2 id="variables">
        
        
          Variables <a href="#variables">#</a>
        
        
      </h2>
    

<pre><code class="language-erlang">variable ::= var_start var_continue*

var_start ::= (XID_Start ∩ (Lu ∪ Lt ∪ Other_Id_Start)) ∪ Pc

var_continue ::= XID_Continue ∪ "@" \ "ªº"
</code></pre>

<p>The choice of XID here follows Python.  It ensures that the normalisation
of a variable is still a variable.  In fact Unicode variables should be
normalised.  Unicode has enough look-alike characters that we cannot hope
for “look the same &lt;=&gt; are the same” to be true, but we should go <em>some</em>
way in that direction.</p>

<p>Variables in scripts that do not distinguish letter case have to
begin with <em>some</em> special character to ensure that they are not
mistaken for unquoted atoms.  There are 10 Pc characters in the Basic
Multilingual Plane.  The Erlang parser treats a variable beginning
with an underscore specially: there will be no complaint if it is a
singleton.  One approach would be to say that this special treatment
does not apply to the other 9 Pc characters.
Using that approach, ‿ would not be a wild-card,
_隠者 should be a singleton, and ‿隠者  should not.</p>

<p>Of course, someone might be using fonts
that do include say Arabic letters but not say the undertie.  We can
deal with that by revising the underscore rule, which I recommend:</p>

<pre><code class="language-erlang">    Variable does not begin with a Pc character =&gt;
             should not be a singleton.

    Variable is just a Pc character and nothing else =&gt;
             is a wild card.

    Variable begins with a Pc character followed by an
    Lu or Lt or Pc character =&gt;
             may be a singleton.

    Variable begins with a Pc character followed by
    a legal character other than an Lu or Lt or Pc character =&gt;
             should not be a singleton.
</code></pre>

<p>Thus ‿ is a wild-card, 隠者 is an atom, _隠者 should not be
a singleton, but __隠者 <em>may</em> be a singleton.  This rule is a
consistent generalisation of the existing rule.</p>
      <h2 id="unquoted-atoms">
        
        
          Unquoted atoms <a href="#unquoted-atoms">#</a>
        
        
      </h2>
    

<pre><code class="language-erlang">    unquoted_atom ::= "."? atom_start atom_continue*

    atom_start ::= XID_Start \ (Lu ∪ Lt ∪ "ªº")

    atom_continue ::= XID_Continue ∪ "@" \ "ªº"
                   |  "." atom_start
</code></pre>

<p>Again the choice of XID follows Python, and ensures that the
normalisation of an unquoted atom is still an unquoted atom.
Unquoted atoms should be normalised.</p>

<p>The details of Erlang unquoted atoms are somewhat subtle; I have
checked my understanding experimentally.  An initial dot is allowed,
but is always discarded.  That’s odd, but it’s the way it is now.</p>
      <h2 id="keywords">
        
        
          Keywords <a href="#keywords">#</a>
        
        
      </h2>
    

<p>Keywords have the form of unquoted atoms.  No new keywords are
introduced.</p>
      <h3 id="specifics">
        
        
          Specifics <a href="#specifics">#</a>
        
        
      </h3>
    

<ul>
  <li>
    <p>Any Python identifier or keyword is
an Erlang variable or unquoted atom or keyword
unless it contains “ª” or “º”.</p>
  </li>
  <li>
    <p>@ signs may occur freely in variables and unquoted atoms except as the
first character, as now.</p>
  </li>
  <li>
    <p>Although they are in the Ll set, and so are technically lower case
letters,  “ª” and “º” are not allowed in variable names or
unquoted atoms in this proposal because they are not allowed in
Erlang now.</p>
  </li>
  <li>
    <p>dots may not be followed by capital letters, digits, or underscores,
as now.</p>
  </li>
  <li>
    <p>I am not sure whether modifier letters should be allowed after a dot.</p>
  </li>
  <li>
    <p>I am not sure what to do with the Other_ID_Start characters.
Script capital p <em>looks</em> like a capital p and even has “capital” in
its name.  All other “* SCRIPT CAPITAL *” characters are upper case
letters.  Surely it should be allowed to start a variable.
The estimated sign looks like an enlarged lower case e; other symbols
that look like letters are classified as letters.  You’d expect this
to begin an atom.  As for the Katakana-Hiragana voicing marks, I have
no intuition whatever.  Assigning the whole group to atoms seems
safest.</p>
  </li>
  <li>
    <p>All existing variable names and unquoted atoms remain legal, and no
new variable or atom forms using only Latin-1 characters have been
introduced.</p>
  </li>
</ul>
      <h1 id="rationale">
        
        
          Rationale <a href="#rationale">#</a>
        
        
      </h1>
    

<p>While Erlang files meant to be shared with a wide audience should
still be written in English, if people are working in a group fluent
in some language on requirements also written in that language, it
is desirable that they should be able to stay close to the terminology
of the requirements lest they introduce translation errors.</p>

<p>The whole design flows in the direction “if someone wants to use their
own script in an Erlang file, they should be able to do so comfortably
in a way that is generally consistent with other programming
languages.”</p>

<p>This <em>does</em> mean that there will be Erlang source files that a skilled
Erlang programmer is unable to decipher because of the unfamiliarity
of the script.  With over 110,000 characters in Unicode 6, this is
just going to happen no matter what we do.  Once Unicode strings are
available, can quoted Unicode atoms be far behind?  And once they are
possible, refusing unquoted Unicode atoms does not salvage universal
readability.  All it would accomplish is to annoy people by requiring
single quotation marks to be used liberally.  Old Algol programmers
will recall only too clearly how much of an impairment to readability
a hailstorm of single quotation marks was.  And if you can use
γαμμα as an atom, does it make any sense to refuse Γαμμα?</p>

<p>One of the goals for this EEP is that if an Erlang text contains only
Latin-1 characters, then it should be legal under the new rules if and
only if it is legal under the old rules, and should have the same
meaning in either context.  During the transition period, there will
be people writing Erlang code for systems following the new rules, and
giving it to people using Latin-1 or at any rate old-rules systems.
They should not <em>accidentally</em> introduce incompatibilities.  This is
why we have to ban  “ª” and “º” for now.  Later we may lift that ban.</p>

<p>There are three ways we have to customize the UAX 31 definition.</p>

<pre><code class="language-erlang">    - We have to continue to support "@" in variables and
      "@" and "." in unquoted atoms for backwards compatibility.

    - We have to continue to forbid unquoted atoms containing
      the Latin-1 masculine and feminine ordinal indicators.

    - We have to distinguish between variables and unquoted atoms.
</code></pre>

<p>There is a fourth way we <em>might</em> customize it.  Ken Whistler of
Unicode advises that he “doesn’t see much point” in allowing Pc
characters other than LOW LINE and FULLWIDTH LOW LINE, unless there
are legacy reasons why something else has to be supported.  It seems
like a good idea that if s is a legal ASCII identifier, the full width
version of s should also be a legal identifier, so FULLWIDTH LOW LINE
definitely ought to be allowed.  I find using UNDERTIE cool, but it’s
an editor’s mark really.  If we reject the other Pc characters now, we
can always allow them later if we find a need; if we allow them now,
it will be hard to reject them later.  Making this change <em>clearly</em> in
the definitions will take a little thought, so that’s for the next revision.</p>

<p>Dmitry Belyaev has raised the issue of localising keywords.  That is
outside the scope of this EEP, which is concerned with which character
sequences are variables and which are keywords-or-unquoted-atoms.
This has to be got right first before we can consider localised keywords.</p>

<p>The leading underscore rule was revised on the 5th of November on
the advice of Ulrich Neumerkel to avoid the problem that _Œuvre
would not have been accepted as a singleton.  Now it will.  This was
ironic, as Māori variables like _Āporo would have been misclassified.</p>
      <h2 id="trouble-spot">
        
        
          Trouble spot <a href="#trouble-spot">#</a>
        
        
      </h2>
    

<p>It is highly desirable that a legal Erlang text should remain legal
even as Unicode is revised.  <a href="http://www.unicode.org/reports/tr31/" title="Unicode Standard Annex 31">UAX#31</a> and <a href="http://www.unicode.org/policies/stability_policy.html" title="Unicode Character Encoding Stability Policy">Stability</a> very nearly
give us what we need.  The one problem that seems to be technically
possible is that an upper or lower case letter without an opposite
case counterpart might change its General Category (while being given
the Other_ID_Start property if it ceased to be a letter at all),
so an identifier beginning with such a cased orphan might switch from
variable to unquoted atom or vice versa.  Some cased orphans do exist,
like LATIN LETTER SMALL CAPITAL M, but what would a capital capital M
be?</p>

<p>One possibility is to raise the issue with the Unicode consortium and
leave this unresolved until they reply.  The issue <em>has</em> been raised,
and the tentative reply “you may not be able to rely on any given
standard property for special purposes.  Especially if that property is not
formally stable.” given.  The next step may well be to seek a revision
to UAX#31, because Erlang is not alone in wanting a case distinction.</p>

<p>Another possibility would be to say that an Lu character may only
begin a variable if it has a lower-case counterpart, and an Ll
character may only begin an unquoted atom if it has an upper-case
counterpart.  Since “ß” and “ÿ” have upper-case counterparts in
Unicode, Latin-1 unquoted atoms would not be affected by such a rule.
The great mass of Lo characters would also be unaffected.</p>
      <h1 id="copyright">
        
        
          Copyright <a href="#copyright">#</a>
        
        
      </h1>
    
<p>This document has been placed in the public domain.</p>

            </div>
        </div>
    </div>
</div>
<script src="/assets/js/prismjs/prism.js"></script>
<script src="/assets/js/prismjs/components/prism-erlang.js"></script>
    <footer class="container-fluid footer text-center border-top border-bottom">
        <div>
            <a href="/downloads.html" title="DOWNLOAD"><img src="/assets/img/download.png" alt="Download Erlang/OTP"></a>
        </div>
        <div>
            <a href="http://www.github.com/erlang/otp"><img
                    src="/assets/img/GitHub-Mark-32px.png" alt="Erlang/OTP on Github"></a>
        </div>
        
        <div>
            <a href="http://www.twitter.com/erlang_org"><img src="/assets/img/twitter.png"
                    width="32" alt="Erlang/OTP twitter"></a>
        </div>
    </footer>
    <script src="/assets/js/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>